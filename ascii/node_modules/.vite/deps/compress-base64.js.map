{
  "version": 3,
  "sources": ["../../compress-base64/dist/index.esm.js"],
  "sourcesContent": ["/*!\n  * compress-base64 v1.0.0\n  * (c) 2020\n  * author: sunsilent\n  * @license MIT\n  */\nfunction compress(base64, options) {\n  return new Promise(function (resolve, reject) {\n    var type = options.type,\n        width = options.width,\n        min = options.min,\n        max = options.max;\n    var img = new Image();\n    var quality = 0.6;\n    img.src = base64;\n    img.setAttribute('crossOrigin', 'Anonymous');\n    var imgWidth, imgHeight;\n\n    img.onload = function () {\n      imgWidth = img.width;\n      imgHeight = img.height;\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n\n      if (Math.max(imgWidth, imgHeight) > width) {\n        if (imgWidth > imgHeight) {\n          canvas.width = width;\n          canvas.height = width * imgHeight / imgWidth;\n        } else {\n          canvas.height = width;\n          canvas.width = width * imgWidth / imgHeight;\n        }\n      } else {\n        canvas.width = imgWidth;\n        canvas.height = imgHeight;\n        quality = 0.6;\n      }\n\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n      var base64 = canvas.toDataURL(type, quality);\n\n      while (base64.length / 1024 > max) {\n        quality -= 0.01;\n        base64 = canvas.toDataURL(type, quality);\n      }\n\n      while (base64.length / 1024 < min) {\n        quality += 0.001;\n        base64 = canvas.toDataURL(type, quality);\n      }\n\n      resolve(base64);\n    };\n\n    img.onerror = function () {\n      reject();\n    };\n  });\n}\n\nexport default compress;\n"],
  "mappings": ";;;AAMA,SAAS,SAAS,QAAQ,SAAS;AACjC,SAAO,IAAI,QAAQ,SAAU,SAAS,QAAQ;AAC5C,QAAI,OAAO,QAAQ,MACf,QAAQ,QAAQ,OAChB,MAAM,QAAQ,KACd,MAAM,QAAQ;AAClB,QAAI,MAAM,IAAI,MAAM;AACpB,QAAI,UAAU;AACd,QAAI,MAAM;AACV,QAAI,aAAa,eAAe,WAAW;AAC3C,QAAI,UAAU;AAEd,QAAI,SAAS,WAAY;AACvB,iBAAW,IAAI;AACf,kBAAY,IAAI;AAChB,UAAI,SAAS,SAAS,cAAc,QAAQ;AAC5C,UAAI,MAAM,OAAO,WAAW,IAAI;AAEhC,UAAI,KAAK,IAAI,UAAU,SAAS,IAAI,OAAO;AACzC,YAAI,WAAW,WAAW;AACxB,iBAAO,QAAQ;AACf,iBAAO,SAAS,QAAQ,YAAY;AAAA,QACtC,OAAO;AACL,iBAAO,SAAS;AAChB,iBAAO,QAAQ,QAAQ,WAAW;AAAA,QACpC;AAAA,MACF,OAAO;AACL,eAAO,QAAQ;AACf,eAAO,SAAS;AAChB,kBAAU;AAAA,MACZ;AAEA,UAAI,UAAU,GAAG,GAAG,OAAO,OAAO,OAAO,MAAM;AAC/C,UAAI,UAAU,KAAK,GAAG,GAAG,OAAO,OAAO,OAAO,MAAM;AACpD,UAAIA,UAAS,OAAO,UAAU,MAAM,OAAO;AAE3C,aAAOA,QAAO,SAAS,OAAO,KAAK;AACjC,mBAAW;AACX,QAAAA,UAAS,OAAO,UAAU,MAAM,OAAO;AAAA,MACzC;AAEA,aAAOA,QAAO,SAAS,OAAO,KAAK;AACjC,mBAAW;AACX,QAAAA,UAAS,OAAO,UAAU,MAAM,OAAO;AAAA,MACzC;AAEA,cAAQA,OAAM;AAAA,IAChB;AAEA,QAAI,UAAU,WAAY;AACxB,aAAO;AAAA,IACT;AAAA,EACF,CAAC;AACH;AAEA,IAAO,oBAAQ;",
  "names": ["base64"]
}
