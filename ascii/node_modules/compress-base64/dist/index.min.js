/*!
  * compress-base64 v1.0.0
  * (c) 2020
  * author: sunsilent
  * @license MIT
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).CompressBase64=e()}(this,(function(){"use strict";return function(t,e){return new Promise((function(n,i){var o,h,a=e.type,r=e.width,d=e.min,f=e.max,s=new Image,u=.6;s.src=t,s.setAttribute("crossOrigin","Anonymous"),s.onload=function(){o=s.width,h=s.height;var t=document.createElement("canvas"),e=t.getContext("2d");Math.max(o,h)>r?o>h?(t.width=r,t.height=r*h/o):(t.height=r,t.width=r*o/h):(t.width=o,t.height=h,u=.6),e.clearRect(0,0,t.width,t.height),e.drawImage(s,0,0,t.width,t.height);for(var i=t.toDataURL(a,u);i.length/1024>f;)u-=.01,i=t.toDataURL(a,u);for(;i.length/1024<d;)u+=.001,i=t.toDataURL(a,u);n(i)},s.onerror=function(){i()}}))}}));
